
<div>
    <h1 *ngIf="isCreateAction">Create SubFeature in <span class="path">{{pathForTitle}}</span></h1>
    <h1 *ngIf="!isCreateAction">Feature <span class="path">{{pathForTitle}}</span></h1>

    <div class="panel-body">
        <form #form="ngForm" class="form-horizontal">

            <div class="form-group row">
                <label class="col-md-1 control-label col-form-label" for="name">Name</label>

                <div class="col-md-11 form-value" *ngIf="!isEditMode">
                    {{model.name || ""}}
                </div>
                <div class="col-md-10" *ngIf="isEditMode">
                    <input id="name" name="name"
                           required
                           #nameNgModel="ngModel" [(ngModel)]="model.name"
                           type="text" class="form-control" >
                    <input-error [model]="nameNgModel"
                                 [errorMessages]="{
                                        required: 'A name for this feature is required',
                                        a_resource_with_the_same_name_already_exist: 'A feature with the same name already exists',
                                        access_denied: 'Couldn\'t create or update this feature. File access is denied'
                                     }"></input-error>
                </div>
            </div>

            <!-- TAGS -->
            <div class="form-group row" *ngIf="!isEditMode && model.tags.length > 0 ">
                <label class="col-md-1 control-label" for="tags">Tags</label>
                <div class="col-md-11 form-value" *ngIf="!isEditMode">
                    <ng-container *ngFor="let tag of model.tags">
                        <span class="label label-primary">{{tag}}</span>
                    </ng-container>
                </div>
            </div>
            <div class="form-group row" *ngIf="isEditMode">
                <label class="col-md-1 control-label" for="tags">Tags</label>
                <div class="col-md-11">
                    <p-autoComplete #tagsElement
                                    [(ngModel)]="model.tags"
                                    [suggestions]="tagsToShow"
                                    (completeMethod)="onSearchTag($event)"
                                    (onSelect)="onTagSelect($event)"
                                    (keypress)="onTagsKeyUp($event);"
                                    [delay]="0"
                                    [multiple]="true"
                                    [dropdown]="true"
                                    id="tags" name="tags"></p-autoComplete>
                </div>
            </div>

            <div class="form-group row">
                <label class="col-md-1 control-label" for="description">Description</label>

                <div class="col-md-11">
                    <markdown-editor #markdownEditor
                                     [value]="model.description"
                                     [options]="markdownEditorOptions"
                                     id="description"></markdown-editor>
                </div>
            </div>


            <div class="form-group row" *ngIf="isEditMode || model.attachments.length > 0">
                <label class="col-md-1 control-label" for="description">Attachments</label>

                <div class="col-md-11">
                    <attachments-component [url]="getFeatureUploadUrl()"
                                           [attachments]="model.attachments"
                                           [editMode]="isEditMode"></attachments-component>
                </div>
            </div>

            <div class="panel-footer-button">
                <ng-container *ngIf="!isEditMode">
                    <button (click)="enableEditTestMode();" class="btn btn-primary">Edit</button>
                </ng-container>
                <ng-container *ngIf="isEditMode">
                    <button (click)="cancelAction();" type="button" class="btn btn-default">Cancel</button>
                    <button *ngIf="!isCreateAction" (click)="deleteAction();$event.stopPropagation();" type="button" class="btn btn-danger">Delete</button>
                    <button [disabled]="!form.form.valid" (click)="saveAction();$event.stopPropagation();" class="btn btn-primary">Save</button>
                </ng-container>
            </div>
        </form>
    </div>
</div>
